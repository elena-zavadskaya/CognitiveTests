import{_ as k,a as w,r as g,c as n,o,b as f,d as e,t as a,e as y,g as u,F as d,f as p,n as S,w as x,u as A}from"./index.js";/* empty css                                              */const C={components:{Navbar:w},setup(){return{authStore:A()}},data(){return{gameStarted:!1,gameEnded:!1,time:90,timer:null,lives:3,symbolsCount:2,maxSymbolsCount:6,leftImage:[],rightImage:[],imagesMatch:!1,message:"",isCorrect:null,correctAnswers:0,totalAnswers:0,accuracy:100,elapsedTime:0,startTime:null,symbols:["üî≤","‚ö´","‚¨õ","‚ñ∑","‚ñº","‚ñ≤","‚ñΩ","üîò"],mistakes:0}},computed:{formattedTime(){const r=Math.floor(this.time/60).toString().padStart(2,"0"),t=(this.time%60).toString().padStart(2,"0");return`${r}:${t}`}},methods:{startGame(){this.gameStarted=!0,this.gameEnded=!1,this.time=30,this.lives=3,this.correctAnswers=0,this.totalAnswers=0,this.accuracy=100,this.message="",this.startTime=new Date,this.mistakes=0,this.symbolsCount=2,this.generateImages(),this.startTimer()},startTimer(){clearInterval(this.timer),this.timer=setInterval(()=>{this.time--,this.time<=0&&(clearInterval(this.timer),this.endGame())},1e3)},generateImages(){const r=Array.from({length:this.symbolsCount},()=>this.symbols[Math.floor(Math.random()*this.symbols.length)]),t=[...r];if(this.imagesMatch=Math.random()<.7,!this.imagesMatch){const i=Math.floor(Math.random()*t.length);let m;do m=this.symbols[Math.floor(Math.random()*this.symbols.length)];while(m===t[i]);t[i]=m}this.leftImage=r,this.rightImage=t},handleAnswer(r){this.totalAnswers++,r===this.imagesMatch?(this.message="–ü—Ä–∞–≤–∏–ª—å–Ω–æ!",this.isCorrect=!0,this.correctAnswers++):(this.message="–ù–µ–ø—Ä–∞–≤–∏–ª—å–Ω–æ!",this.isCorrect=!1,this.lives--,this.mistakes++),this.lives===0||this.time<=0?(clearInterval(this.timer),this.calculateAccuracy(),this.endGame()):(this.correctAnswers%3===0&&this.symbolsCount<this.maxSymbolsCount&&this.symbolsCount++,setTimeout(()=>{this.message="",this.generateImages()},1e3))},calculateAccuracy(){this.mistakes===0?this.accuracy=100:this.mistakes===1?this.accuracy=Math.max(0,70+this.correctAnswers):this.mistakes===2?this.accuracy=Math.max(0,40+this.correctAnswers):this.mistakes>=3&&(this.accuracy=Math.max(0,30+this.correctAnswers)),this.mistakes>0?this.accuracy=parseFloat(this.accuracy.toFixed(2)):this.accuracy=parseFloat(this.accuracy.toFixed(2))},endGame(){this.gameStarted=!1,this.gameEnded=!0;const r=new Date;this.elapsedTime=((r-this.startTime)/1e3).toFixed(2),this.saveResults()},async saveResults(){if(!this.authStore.user){alert("–ü–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—å –Ω–µ –∞–≤—Ç–æ—Ä–∏–∑–æ–≤–∞–Ω. –ü–æ–∂–∞–ª—É–π—Å—Ç–∞, –≤–æ–π–¥–∏—Ç–µ –≤ —Å–∏—Å—Ç–µ–º—É.");return}const r=6,t=this.accuracy;try{const i=await fetch("http://127.0.0.1:8000/api/result/",{method:"POST",headers:{"Content-Type":"application/json",Authorization:`Bearer ${localStorage.getItem("token")}`},body:JSON.stringify({test:r,user:this.authStore.user.id,score_percentage:parseFloat(t)})});if(i.ok)alert("–†–µ–∑—É–ª—å—Ç–∞—Ç—ã —É—Å–ø–µ—à–Ω–æ —Å–æ—Ö—Ä–∞–Ω–µ–Ω—ã!");else{const m=await i.json();alert(m.error||"–û—à–∏–±–∫–∞ –ø—Ä–∏ —Å–æ—Ö—Ä–∞–Ω–µ–Ω–∏–∏ —Ä–µ–∑—É–ª—å—Ç–∞—Ç–æ–≤")}}catch(i){console.error("–û—à–∏–±–∫–∞ –ø—Ä–∏ –æ—Ç–ø—Ä–∞–≤–∫–µ —Ä–µ–∑—É–ª—å—Ç–∞—Ç–æ–≤:",i)}}}},I={class:"container mt-5 text-center"},T={id:"app"},M={key:0},_={key:1},F={class:"game-area d-flex justify-content-center"},N={class:"image-container border p-3 mx-2"},E={class:"image-container border p-3 mx-2"},G={class:"choices d-flex justify-content-center"},j={key:2,class:"end-message"};function B(r,t,i,m,s,c){const b=g("Navbar"),v=g("router-link");return o(),n(d,null,[f(b),e("div",I,[e("h2",null,a(r.$route.params.name),1),e("div",T,[!s.gameStarted&&!s.gameEnded?(o(),n("div",M,[t[3]||(t[3]=e("h1",null,'–ò–≥—Ä–∞ "–°—Ä–∞–≤–Ω–µ–Ω–∏–µ –æ–±—ä–µ–∫—Ç–æ–≤"',-1)),t[4]||(t[4]=e("p",null,[e("strong",null,'"–°—Ä–∞–≤–Ω–µ–Ω–∏–µ –æ–±—ä–µ–∫—Ç–æ–≤"'),u(" ‚Äî —ç—Ç–æ –∏–≥—Ä–∞ –¥–ª—è —Ä–∞–∑–≤–∏—Ç–∏—è –ø—Ä–æ–∏–∑–≤–æ–ª—å–Ω–æ–≥–æ –≤–Ω–∏–º–∞–Ω–∏—è –∏ –∫–æ–Ω—Ü–µ–Ω—Ç—Ä–∞—Ü–∏–∏. ")],-1)),t[5]||(t[5]=e("p",null,[e("strong",null,"–¶–µ–ª—å –∏–≥—Ä—ã:"),u(" —Å—Ä–∞–≤–Ω–∏—Ç—å –¥–≤–∞ –∏–∑–æ–±—Ä–∞–∂–µ–Ω–∏—è –∏ –æ–ø—Ä–µ–¥–µ–ª–∏—Ç—å, —Å–æ–≤–ø–∞–¥–∞—é—Ç –ª–∏ –æ–Ω–∏. ")],-1)),t[6]||(t[6]=e("p",null," –ò–≥—Ä–∞ –ø–æ–º–æ–≥–∞–µ—Ç —Ç—Ä–µ–Ω–∏—Ä–æ–≤–∞—Ç—å –≤–Ω–∏–º–∞–Ω–∏–µ, —É–≤–µ–ª–∏—á–∏–≤–∞—Ç—å –∫–æ–Ω—Ü–µ–Ω—Ç—Ä–∞—Ü–∏—é –∏ —É–ª—É—á—à–∞—Ç—å —Å–ø–æ—Å–æ–±–Ω–æ—Å—Ç—å –∫ –±—ã—Å—Ç—Ä–æ–º—É –∞–Ω–∞–ª–∏–∑—É. ",-1)),e("button",{class:"start-button btn btn-primary",onClick:t[0]||(t[0]=(...l)=>c.startGame&&c.startGame(...l))},"–ù–∞—á–∞—Ç—å –∏–≥—Ä—É")])):s.gameStarted?(o(),n("div",_,[e("p",null,"–û—Å—Ç–∞–≤—à–µ–µ—Å—è –≤—Ä–µ–º—è: "+a(c.formattedTime),1),e("p",null,"–ñ–∏–∑–Ω–∏: "+a(s.lives),1),e("div",F,[e("div",N,[(o(!0),n(d,null,p(s.leftImage,(l,h)=>(o(),n("div",{key:"left-"+h,class:"symbol"},a(l),1))),128))]),e("div",E,[(o(!0),n(d,null,p(s.rightImage,(l,h)=>(o(),n("div",{key:"right-"+h,class:"symbol"},a(l),1))),128))])]),t[7]||(t[7]=e("p",{class:"instruction"},"–°–æ–≤–ø–∞–¥–∞—é—Ç –ª–∏ –∏–∑–æ–±—Ä–∞–∂–µ–Ω–∏—è?",-1)),e("div",G,[e("button",{class:"choice-button btn btn-danger mx-2",onClick:t[1]||(t[1]=l=>c.handleAnswer(!1))},"–ù–µ—Ç"),e("button",{class:"choice-button btn btn-success mx-2",onClick:t[2]||(t[2]=l=>c.handleAnswer(!0))},"–î–∞")]),e("p",{class:S(["message",{correct:s.isCorrect,incorrect:!s.isCorrect}])},a(s.message),3)])):y("",!0),s.gameEnded?(o(),n("div",j,[t[8]||(t[8]=e("h3",null,"–ò–≥—Ä–∞ –∑–∞–≤–µ—Ä—à–µ–Ω–∞!",-1)),e("p",null,"–ü—Ä–∞–≤–∏–ª—å–Ω—ã—Ö –æ—Ç–≤–µ—Ç–æ–≤: "+a(s.correctAnswers)+" –∏–∑ "+a(s.totalAnswers),1),e("p",null,"–¢–æ—á–Ω–æ—Å—Ç—å: "+a(s.accuracy)+"%",1),e("p",null,"–í—Ä–µ–º—è: "+a(s.elapsedTime)+" —Å–µ–∫—É–Ω–¥",1)])):y("",!0)]),f(v,{to:"/tests",class:"btn btn-secondary"},{default:x(()=>t[9]||(t[9]=[u("–ù–∞–∑–∞–¥ –∫ —Ç–µ—Å—Ç–∞–º")])),_:1})])],64)}const z=k(C,[["render",B]]);export{z as default};
