import{_ as v,a as T,r as h,c as i,o as l,b as p,d as s,t as d,e as _,g as c,F as f,f as b,n as k,w as y,u as w}from"./index.js";const S={components:{Navbar:T},setup(){return{authStore:w()}},data(){return{currentView:"start",cards:[],flippedCards:[],matchedCards:[],gameStarted:!1,remainingTime:60,startTime:null,elapsedTime:0}},computed:{formattedTime(){const e=Math.floor(this.remainingTime/60).toString().padStart(2,"0"),t=(this.remainingTime%60).toString().padStart(2,"0");return`${e}:${t}`},accuracy(){const e=this.cards.length/2,t=this.matchedCards.length;return e?(t/e*100).toFixed(2):0}},methods:{startGame(){this.currentView="test",this.cards=this.generateCards(),this.startTime=Date.now(),this.startTimer()},generateCards(){const e=["üòä","üòÇ","üòç","üòé","üòú","üò¢","üò±","üòà"],t=[...e,...e];return this.shuffle(t).map(n=>({value:n,flipped:!1,matched:!1}))},shuffle(e){return e.sort(()=>Math.random()-.5)},startTimer(){const e=setInterval(()=>{this.remainingTime>0?this.remainingTime--:(clearInterval(e),this.endGame())},1e3)},flipCard(e){e.flipped||e.matched||this.flippedCards.length===2||(e.flipped=!0,this.flippedCards.push(e),this.flippedCards.length===2&&this.checkForMatch())},checkForMatch(){const[e,t]=this.flippedCards;e.value===t.value?(e.matched=!0,t.matched=!0,this.matchedCards.push(e)):setTimeout(()=>{e.flipped=!1,t.flipped=!1},1e3),this.flippedCards=[]},endGame(){this.elapsedTime=((Date.now()-this.startTime)/1e3).toFixed(2),this.currentView="result",this.saveResults()},restartGame(){this.currentView="start",this.remainingTime=60,this.matchedCards=[],this.flippedCards=[]},async saveResults(){if(!this.authStore.user){alert("–ü–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—å –Ω–µ –∞–≤—Ç–æ—Ä–∏–∑–æ–≤–∞–Ω. –ü–æ–∂–∞–ª—É–π—Å—Ç–∞, –≤–æ–π–¥–∏—Ç–µ –≤ —Å–∏—Å—Ç–µ–º—É.");return}const e=4,t=this.accuracy;try{const n=await fetch("http://127.0.0.1:8000/api/result/",{method:"POST",headers:{"Content-Type":"application/json",Authorization:`Bearer ${localStorage.getItem("token")}`},body:JSON.stringify({test:e,user:this.authStore.user.id,score_percentage:parseFloat(t)})});if(n.ok)alert("–†–µ–∑—É–ª—å—Ç–∞—Ç—ã —É—Å–ø–µ—à–Ω–æ —Å–æ—Ö—Ä–∞–Ω–µ–Ω—ã!");else{const u=await n.json();alert(u.error||"–û—à–∏–±–∫–∞ –ø—Ä–∏ —Å–æ—Ö—Ä–∞–Ω–µ–Ω–∏–∏ —Ä–µ–∑—É–ª—å—Ç–∞—Ç–æ–≤")}}catch(n){console.error("–û—à–∏–±–∫–∞ –ø—Ä–∏ –æ—Ç–ø—Ä–∞–≤–∫–µ —Ä–µ–∑—É–ª—å—Ç–∞—Ç–æ–≤:",n)}}}},V={class:"container mt-5 text-center"},G={id:"app"},x={key:0},N={key:1},F={class:"cards-container d-flex flex-wrap justify-content-center"},I=["onClick"],B={class:"card-inner"},D={class:"card-back"},M={key:2},P={class:"controls"};function j(e,t,n,u,o,a){const C=h("Navbar"),g=h("router-link");return l(),i(f,null,[p(C),s("div",V,[s("h2",null,d(e.$route.params.name),1),s("div",G,[o.currentView==="start"?(l(),i("div",x,[t[3]||(t[3]=s("h1",null,'–ò–≥—Ä–∞ "–¢–µ—Å—Ç –Ω–∞ –ø–∞–º—è—Ç—å"',-1)),t[4]||(t[4]=s("p",null,[s("strong",null,'"–¢–µ—Å—Ç –Ω–∞ –ø–∞–º—è—Ç—å"'),c(" ‚Äî —ç—Ç–æ –∏–≥—Ä–∞ –Ω–∞ —Ä–∞–∑–≤–∏—Ç–∏–µ –≤–Ω–∏–º–∞–Ω–∏—è –∏ –∫–æ–Ω—Ü–µ–Ω—Ç—Ä–∞—Ü–∏–∏. ")],-1)),t[5]||(t[5]=s("p",null,[s("strong",null,"–¶–µ–ª—å:"),c(" –ù–∞–π–¥–∏—Ç–µ –≤—Å–µ –ø–∞—Ä—ã –∑–∞ 60 —Å–µ–∫—É–Ω–¥. ")],-1)),s("button",{class:"btn btn-primary",onClick:t[0]||(t[0]=(...r)=>a.startGame&&a.startGame(...r))},"–ù–∞—á–∞—Ç—å –∏–≥—Ä—É")])):o.currentView==="test"?(l(),i("div",N,[s("p",null,"–û—Å—Ç–∞–≤—à–µ–µ—Å—è –≤—Ä–µ–º—è: "+d(a.formattedTime),1),s("div",F,[(l(!0),i(f,null,b(o.cards,(r,m)=>(l(),i("div",{key:m,class:k(["card",{flipped:r.flipped||r.matched,matched:r.matched}]),onClick:z=>a.flipCard(r,m)},[s("div",B,[t[6]||(t[6]=s("div",{class:"card-front"},null,-1)),s("div",D,[s("span",null,d(r.value),1)])])],10,I))),128))]),s("button",{class:"btn btn-danger mt-3",onClick:t[1]||(t[1]=(...r)=>a.endGame&&a.endGame(...r))},"–ó–∞–≤–µ—Ä—à–∏—Ç—å —Ç–µ—Å—Ç")])):o.currentView==="result"?(l(),i("div",M,[t[7]||(t[7]=s("h3",null,"–†–µ–∑—É–ª—å—Ç–∞—Ç—ã",-1)),s("p",null,"–í—Ä–µ–º—è –≤—ã–ø–æ–ª–Ω–µ–Ω–∏—è: "+d(o.elapsedTime)+" —Å–µ–∫—É–Ω–¥.",1),s("p",null,"–¢–æ—á–Ω–æ—Å—Ç—å: "+d(a.accuracy)+"%",1),s("div",P,[s("button",{class:"btn btn-success",onClick:t[2]||(t[2]=(...r)=>a.restartGame&&a.restartGame(...r))},"–ù–∞—á–∞—Ç—å –∑–∞–Ω–æ–≤–æ")])])):_("",!0),p(g,{to:"/tests",class:"btn btn-secondary"},{default:y(()=>t[8]||(t[8]=[c("–ù–∞–∑–∞–¥ –∫ —Ç–µ—Å—Ç–∞–º")])),_:1})])])],64)}const O=v(S,[["render",j],["__scopeId","data-v-a8651724"]]);export{O as default};
