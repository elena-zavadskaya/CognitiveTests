import{_ as A,a as f,r as g,c,o as a,b as m,d as t,e as p,t as r,F as h,f as y,w as b,g as k,u as x}from"./index.js";/* empty css                                              */const S="/triangleCircle.png",v="/96.png",T="/13.png",Q="/95.png",I="/triangleCircle(3).png",N="/9.png",q="/13(2).png",F="/66.png",B="/triangleCircle(2).png",d="/96(2).png",D="/triangleCircle(5).png",V="/36.png",j="/136.png",O="/triangleCircle(4).png",P="/30.png",R="/9(2).png",z={components:{Navbar:f},setup(){return{authStore:x()}},data(){return{testStarted:!1,testCompleted:!1,score:0,currentQuestionIndex:0,startTime:null,time:0,accuracy:0,questions:[{image:S,correctAnswer:"Треугольник и круг",options:["Треугольник","Треугольник и круг","Круг","Ничего"]},{image:v,correctAnswer:"96",options:["6","Ничего","9","96"]},{image:T,correctAnswer:"13",options:["9","1","13","5"]},{image:Q,correctAnswer:"95",options:["95","Ничего","9","5"]},{image:I,correctAnswer:"Треугольник и круг",options:["Ничего","Круг","Треугольник","Треугольник и круг"]},{image:N,correctAnswer:"9",options:["6","8","9","Ничего"]},{image:q,correctAnswer:"13",options:["1","13","Ничего","3"]},{image:F,correctAnswer:"66",options:["9","66","6","Ничего"]},{image:B,correctAnswer:"Треугольник и круг",options:["Ничего","Круг","Треугольник","Треугольник и круг"]},{image:d,correctAnswer:"96",options:["96","Ничего","9","6"]},{image:D,correctAnswer:"Треугольник и круг",options:["Ничего","Треугольник","Круг","Треугольник и круг"]},{image:V,correctAnswer:"36",options:["3","6","Ничего","36"]},{image:j,correctAnswer:"136",options:["136","66","68","69"]},{image:O,correctAnswer:"Треугольник и круг",options:["Треугольник и квадрат","Треугольник и круг","Два треугольника и квадрат","Ничего"]},{image:d,correctAnswer:"96",options:["Ничего","6","9","96"]},{image:P,correctAnswer:"30",options:["6","10","30","Ничего"]},{image:R,correctAnswer:"9",options:["0","9","Ничего","2"]}]}},computed:{currentQuestion(){return this.questions[this.currentQuestionIndex]}},methods:{startTest(){this.testStarted=!0,this.testCompleted=!1,this.score=0,this.currentQuestionIndex=0,this.startTime=Date.now(),this.accuracy=0},checkAnswer(o){o===this.currentQuestion.correctAnswer&&this.score++,this.currentQuestionIndex<this.questions.length-1?this.currentQuestionIndex++:(this.testCompleted=!0,this.time=((Date.now()-this.startTime)/1e3).toFixed(2),this.accuracy=(this.score/this.questions.length*100).toFixed(2),this.saveResults())},resetTest(){this.testStarted=!1,this.testCompleted=!1,this.time=0,this.accuracy=0},async saveResults(){if(!this.authStore.user){alert("Пользователь не авторизован. Пожалуйста, войдите в систему.");return}const o=16,s=parseFloat(this.accuracy);try{const l=await fetch("http://127.0.0.1:8000/api/result/",{method:"POST",headers:{"Content-Type":"application/json",Authorization:`Bearer ${localStorage.getItem("token")}`},body:JSON.stringify({test:o,user:this.authStore.user.id,score_percentage:s})});if(l.ok)alert("Результаты успешно сохранены!");else{const u=await l.json();alert(u.error||"Ошибка при сохранении результатов")}}catch(l){console.error("Ошибка при отправке результатов:",l)}}}},E={class:"container mt-5 text-center"},J={class:"color-blindness-test"},L={key:0},G={key:1},H=["src"],K={class:"answers"},M=["onClick"],U={key:2};function W(o,s,l,u,e,n){const w=g("Navbar"),C=g("router-link");return a(),c(h,null,[m(w),t("div",E,[t("div",J,[t("h2",null,r(o.$route.params.name),1),!e.testStarted&&!e.testCompleted?(a(),c("div",L,[s[2]||(s[2]=t("p",null,"Ваша задача: выбрать правильное число, которое вы видите на изображении.",-1)),t("button",{class:"start-button btn btn-primary",onClick:s[0]||(s[0]=(...i)=>n.startTest&&n.startTest(...i))},"Начать тест")])):e.testStarted&&!e.testCompleted?(a(),c("div",G,[t("p",null,"Вопрос "+r(e.currentQuestionIndex+1)+" из "+r(e.questions.length),1),t("img",{src:n.currentQuestion.image,alt:"Тест на цветовое зрение"},null,8,H),t("div",K,[(a(!0),c(h,null,y(n.currentQuestion.options,(i,_)=>(a(),c("button",{key:_,class:"btn btn-outline-primary mx-1",onClick:X=>n.checkAnswer(i)},r(i),9,M))),128))])])):p("",!0),e.testCompleted?(a(),c("div",U,[t("p",null,"Ваш результат: "+r(e.score)+" из "+r(e.questions.length),1),t("p",null,"Точность: "+r(e.accuracy)+"%",1),t("p",null,"Время выполнения: "+r(e.time)+" секунд",1),t("button",{class:"btn btn-secondary",onClick:s[1]||(s[1]=(...i)=>n.resetTest&&n.resetTest(...i))},"Пройти заново")])):p("",!0),m(C,{to:"/tests",class:"btn btn-secondary"},{default:b(()=>s[3]||(s[3]=[k("Назад к тестам")])),_:1})])])],64)}const $=A(z,[["render",W]]);export{$ as default};
