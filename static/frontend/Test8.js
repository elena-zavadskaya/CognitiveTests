import{_,a as q,r as m,c as r,o,b as p,d as e,e as l,t as n,g as d,F as w,f as y,w as k,u as v}from"./index.js";/* empty css                                              */const S={components:{Navbar:q},setup(){return{authStore:v()}},data(){return{gameStarted:!1,gameEnded:!1,currentQuestion:0,answered:!1,feedback:"",correctAnswers:0,accuracy:0,time:0,startTime:null,questions:[{sequence:"1, 2, ?, 4, 5",options:[2,3,1,4],answer:3},{sequence:"1, 3, ?, 7, 9",options:[5,3,1,13],answer:5},{sequence:"1, 10, 3, 8, ?, 6, 7, 4, 9, 2",options:[8,9,5,11],answer:5},{sequence:"1, 3, 9, 27, ?, 243",options:[36,48,81,54],answer:81},{sequence:"2, 3, 5, 7, 11, 13, 17, 19, ?, 29",options:[23,22,25,30],answer:23},{sequence:"916, 015, ?, 213, 312, 411",options:[123,332,113,114],answer:114},{sequence:"23, 57, 1113, 1719, 2329, ?, 4143, 4753",options:[3137,4122,51232,12523],answer:3137},{sequence:"1, 5, 16, 17, 18,<br>2, 6, 17, 18, ?",options:[31,22,19,5],answer:19},{sequence:"1 - 2 - 5 - 7 - 8,<br>1 - 2 - 5 - 7 - 1,<br>8 - 7 - ? - 8 - 2,<br>7 - 5 - 2 - 1 - 5,<br>5 - 2 - 1 - 8 - 7",options:[1,2,5,8,7],answer:8},{sequence:"6 - 2 - 7 - 6 - 6 - 2,<br>2 - 0 - 7 - 0 - ? - 0,<br>0 - 2 - 0 - 7 - 0 - 2,<br>2 - 6 - 6 - 7 - 2 - 6,<br>7 - 6 - 6 - 2 - 7 - 6,<br>7 - 0 - 2 - 0 - 7 - 0",options:[2,0,6,7],answer:2},{sequence:"3.14, 4.28, 5.46, 6.82, 7.64, ?",options:[8.99,8.28,8.38,8],answer:8.28},{sequence:"8110423, 259974, 9814143, 5512166, 113322, ?",options:[334455,7911132,9841233,872236],answer:7911132}]}},computed:{finalMessage(){return this.accuracy>=80?"Вы настоящий мастер!":this.accuracy>=50?"Хороший результат! Немного практики — и всё получится!":"Может быть, вам ближе искусство?"}},methods:{startGame(){this.gameStarted=!0,this.gameEnded=!1,this.currentQuestion=0,this.correctAnswers=0,this.answered=!1,this.feedback="",this.accuracy=0,this.time=0,this.startTime=new Date},handleAnswer(i){if(this.answered)return;this.answered=!0;const s=this.questions[this.currentQuestion];i===s.answer?(this.feedback="Правильно!",this.correctAnswers++):this.feedback=`Неправильно! Правильный ответ: ${s.answer}`,setTimeout(()=>{this.moveToNextQuestion()},1500)},moveToNextQuestion(){this.answered=!1,this.currentQuestion+1<this.questions.length?this.currentQuestion++:this.endGame()},endGame(){this.gameStarted=!1,this.gameEnded=!0,this.accuracy=Math.round(this.correctAnswers/this.questions.length*100),this.time=((new Date-this.startTime)/1e3).toFixed(2),this.saveResults()},async saveResults(){if(!this.authStore.user){alert("Пользователь не авторизован. Пожалуйста, войдите в систему.");return}const i=8,s=this.accuracy;try{const a=await fetch("http://127.0.0.1:8000/api/result/",{method:"POST",headers:{"Content-Type":"application/json",Authorization:`Bearer ${localStorage.getItem("token")}`},body:JSON.stringify({test:i,user:this.authStore.user.id,score_percentage:parseFloat(s)})});if(a.ok)alert("Результаты успешно сохранены!");else{const h=await a.json();alert(h.error||"Ошибка при сохранении результатов")}}catch(a){console.error("Ошибка при отправке результатов:",a)}}}},T={class:"container mt-5 text-center"},N={class:"game-container sequence-test-container"},Q={key:0},x={key:1},A={class:"info"},C={class:"sequence"},E=["innerHTML"],G={class:"answers"},M=["onClick","disabled"],B={key:0,class:"feedback message mt-3"},D={key:2,class:"results end-message"},F={class:"final-message"};function V(i,s,a,h,t,u){const f=m("Navbar"),b=m("router-link");return o(),r(w,null,[p(f),e("div",T,[e("div",N,[!t.gameStarted&&!t.gameEnded?(o(),r("div",Q,[e("h2",null,n(i.$route.params.name),1),s[1]||(s[1]=e("p",null,[e("strong",null,'"Тест Числовых Последовательностей"'),d(" — это тест для развития логического мышления и аналитических способностей. ")],-1)),s[2]||(s[2]=e("p",null,[e("strong",null,"Цель игры:"),d(" разгадать закономерность числовой последовательности и выбрать правильное число. ")],-1)),s[3]||(s[3]=e("p",null," В каждом вопросе вы увидите последовательность с пропущенным элементом. Найдите логическую связь между числами и выберите правильный ответ. ",-1)),s[4]||(s[4]=e("p",null," Тест помогает улучшать навыки анализа, тренировать внимание и развивать математическое мышление. Удачи! ",-1)),e("button",{class:"start-button btn btn-primary",onClick:s[0]||(s[0]=(...c)=>u.startGame&&u.startGame(...c))},"Начать тест")])):t.gameStarted?(o(),r("div",x,[e("div",A,[e("p",null,"Вопрос: "+n(t.currentQuestion+1)+" / "+n(t.questions.length),1)]),e("div",C,[e("p",{innerHTML:t.questions[t.currentQuestion].sequence},null,8,E)]),e("div",G,[(o(!0),r(w,null,y(t.questions[t.currentQuestion].options,(c,g)=>(o(),r("button",{key:g,onClick:L=>u.handleAnswer(c),disabled:t.answered,class:"answer-button btn btn-outline-primary mx-1"},n(c),9,M))),128))]),t.answered?(o(),r("p",B,n(t.feedback),1)):l("",!0)])):l("",!0),t.gameEnded?(o(),r("div",D,[s[5]||(s[5]=e("h3",null,"Тест завершён!",-1)),e("p",null,"Вы ответили правильно на "+n(t.correctAnswers)+" из "+n(t.questions.length)+" вопросов.",1),e("p",null,"Точность: "+n(t.accuracy)+"%",1),e("p",null,"Время: "+n(t.time)+" секунд",1),e("p",F,n(u.finalMessage),1)])):l("",!0),p(b,{to:"/tests",class:"btn btn-secondary"},{default:k(()=>s[6]||(s[6]=[d("Назад к тестам")])),_:1})])])],64)}const I=_(S,[["render",V]]);export{I as default};
