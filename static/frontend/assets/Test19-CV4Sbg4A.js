import{_ as f,a as p,r as c,c as u,o as m,b as h,d as e,t as n,e as _,w as T,g,F as w,u as S}from"./index-BFI9Nzsh.js";const N={components:{Navbar:p},setup(){return{authStore:S()}},data(){return{leftNumber:0,rightNumber:0,startTime:60,remainingTime:60,testStarted:!1,testFinished:!1,number_all_answers:20,number_correct_answers:0,current_question:0,timer:null,elapsedTime:0,accuracy:0,time:"00:00:00"}},computed:{formattedTime(){const s=Math.floor(this.remainingTime/60).toString().padStart(2,"0"),t=(this.remainingTime%60).toString().padStart(2,"0");return`00:${s}:${t}`}},methods:{formatTime(s){const t=Math.floor(s/3600).toString().padStart(2,"0"),i=Math.floor(s%3600/60).toString().padStart(2,"0"),o=(s%60).toString().padStart(2,"0");return`${t}:${i}:${o}`},generateNumbers(){this.leftNumber=Math.floor(Math.random()*1e7),this.rightNumber=Math.random()<.5?this.leftNumber:this.leftNumber+Math.floor(Math.random()*10)+1},checkAnswer(s){this.leftNumber===this.rightNumber===s&&this.number_correct_answers++,this.current_question++,this.current_question>=this.number_all_answers?this.finishTest():this.generateNumbers()},startTest(){this.testStarted=!0,this.testFinished=!1,this.number_correct_answers=0,this.current_question=0,this.remainingTime=this.startTime,this.elapsedTime=0,this.startTimer(),this.generateNumbers()},startTimer(){clearInterval(this.timer),this.timer=setInterval(()=>{this.remainingTime>0?this.remainingTime--:this.finishTest()},1e3)},finishTest(){clearInterval(this.timer),this.testFinished=!0,this.elapsedTime=this.startTime-this.remainingTime,this.time=this.formatTime(this.elapsedTime),this.accuracy=this.number_correct_answers/this.number_all_answers*100,this.saveResults()},resetTest(){this.testStarted=!1,this.testFinished=!1,this.number_correct_answers=0,this.current_question=0,this.remainingTime=this.startTime,this.elapsedTime=0,this.accuracy=0,this.time="00:00:00"},async saveResults(){if(!this.authStore.user){alert("–ü–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—å –Ω–µ –∞–≤—Ç–æ—Ä–∏–∑–æ–≤–∞–Ω. –í–æ–π–¥–∏—Ç–µ –≤ —Å–∏—Å—Ç–µ–º—É.");return}const s=19,t=parseFloat(this.accuracy);if(isNaN(t)){alert("–û—à–∏–±–∫–∞: –Ω–µ–∫–æ—Ä—Ä–µ–∫—Ç–Ω–æ–µ –∑–Ω–∞—á–µ–Ω–∏–µ —Ç–æ—á–Ω–æ—Å—Ç–∏.");return}console.log("–û—Ç–ø—Ä–∞–≤–ª—è–µ–º—ã–µ –¥–∞–Ω–Ω—ã–µ:",{test:s,user:this.authStore.user.id,score_percentage:t,time:this.time,number_all_answers:this.number_all_answers,number_correct_answers:this.number_correct_answers});try{const i=await fetch("http://127.0.0.1:8000/api/result/",{method:"POST",headers:{"Content-Type":"application/json",Authorization:`Bearer ${localStorage.getItem("token")}`},body:JSON.stringify({test:s,user:this.authStore.user.id,score_percentage:Math.round(t),time:this.time,number_all_answers:this.number_all_answers,number_correct_answers:this.number_correct_answers})});if(i.ok)alert("–†–µ–∑—É–ª—å—Ç–∞—Ç—ã —É—Å–ø–µ—à–Ω–æ —Å–æ—Ö—Ä–∞–Ω–µ–Ω—ã!");else{const o=await i.json();console.error("–û—à–∏–±–∫–∞ —Å–µ—Ä–≤–µ—Ä–∞:",o),alert(o.error||"–û—à–∏–±–∫–∞ –ø—Ä–∏ —Å–æ—Ö—Ä–∞–Ω–µ–Ω–∏–∏ —Ä–µ–∑—É–ª—å—Ç–∞—Ç–æ–≤")}}catch(i){console.error("–û—à–∏–±–∫–∞ –ø—Ä–∏ –æ—Ç–ø—Ä–∞–≤–∫–µ —Ä–µ–∑—É–ª—å—Ç–∞—Ç–æ–≤:",i)}}}},v={class:"container mt-5 text-center"},y={id:"app"},k={key:0},F={key:1},M={class:"equation d-flex justify-content-center align-items-center gap-3"},C={class:"fs-4"},q={class:"fs-4"},x={key:2,class:"result"},I={class:"mt-4"};function A(s,t,i,o,r,a){const d=c("Navbar"),b=c("router-link");return m(),u(w,null,[h(d),e("div",v,[e("h2",null,n(s.$route.params.name),1),e("div",y,[!r.testStarted&&!r.testFinished?(m(),u("div",k,[t[4]||(t[4]=e("h1",null,"üß† –¢–µ—Å—Ç –Ω–∞ –º–∞—Ç–µ–º–∞—Ç–∏—á–µ—Å–∫—É—é –≤–Ω–∏–º–∞—Ç–µ–ª—å–Ω–æ—Å—Ç—å",-1)),t[5]||(t[5]=e("p",null,"–í —ç—Ç–æ–º —Ç–µ—Å—Ç–µ –≤–∞–º –±—É–¥–µ—Ç –ø–æ–∫–∞–∑–∞–Ω–æ –¥–≤–∞ —á–∏—Å–ª–∞. –í–∞—à–∞ –∑–∞–¥–∞—á–∞ ‚Äî –æ–ø—Ä–µ–¥–µ–ª–∏—Ç—å, —Ä–∞–≤–Ω—ã –ª–∏ –æ–Ω–∏.",-1)),t[6]||(t[6]=e("p",null,"–í—Å–µ–≥–æ 20 –≤–æ–ø—Ä–æ—Å–æ–≤. 60 —Å–µ–∫—É–Ω–¥ –Ω–∞ –ø—Ä–æ—Ö–æ–∂–¥–µ–Ω–∏–µ.",-1)),e("button",{class:"btn btn-primary start-button",onClick:t[0]||(t[0]=(...l)=>a.startTest&&a.startTest(...l))},"–ù–∞—á–∞—Ç—å —Ç–µ—Å—Ç")])):r.testStarted&&!r.testFinished?(m(),u("div",F,[e("h2",null,"–í–æ–ø—Ä–æ—Å "+n(r.current_question+1)+" –∏–∑ "+n(r.number_all_answers),1),e("p",null,"‚è≥ –û—Å—Ç–∞–≤—à–µ–µ—Å—è –≤—Ä–µ–º—è: "+n(a.formattedTime),1),e("div",M,[e("span",C,n(r.leftNumber),1),e("button",{class:"btn btn-primary",onClick:t[1]||(t[1]=l=>a.checkAnswer(!0))},"="),e("button",{class:"btn btn-danger",onClick:t[2]||(t[2]=l=>a.checkAnswer(!1))},"‚â†"),e("span",q,n(r.rightNumber),1)])])):_("",!0),r.testFinished?(m(),u("div",x,[t[7]||(t[7]=e("h2",null,"‚úÖ –¢–µ—Å—Ç –∑–∞–≤–µ—Ä—à—ë–Ω!",-1)),e("p",null,"–í—ã –æ—Ç–≤–µ—Ç–∏–ª–∏ –ø—Ä–∞–≤–∏–ª—å–Ω–æ –Ω–∞ "+n(r.number_correct_answers)+" –∏–∑ "+n(r.number_all_answers)+" –≤–æ–ø—Ä–æ—Å–æ–≤",1),e("p",null,"‚è≥ –í—Ä–µ–º—è –≤—ã–ø–æ–ª–Ω–µ–Ω–∏—è: "+n(r.time),1),e("p",null,"üéØ –¢–æ—á–Ω–æ—Å—Ç—å: "+n(r.accuracy.toFixed(2))+"%",1),e("button",{class:"btn btn-success mt-3",onClick:t[3]||(t[3]=(...l)=>a.resetTest&&a.resetTest(...l))},"–ü—Ä–æ–π—Ç–∏ —Å–Ω–æ–≤–∞")])):_("",!0),e("div",I,[h(b,{to:"/tests",class:"btn btn-secondary"},{default:T(()=>t[8]||(t[8]=[g("–ù–∞–∑–∞–¥ –∫ —Ç–µ—Å—Ç–∞–º")])),_:1})])])])],64)}const V=f(N,[["render",A],["__scopeId","data-v-c1caee06"]]);export{V as default};
