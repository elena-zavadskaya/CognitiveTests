import{_ as g,a as w,r as d,c as o,o as m,b as h,d as s,t as l,e as v,g as c,F as p,f as T,n as C,w as S,u as y}from"./index-BFI9Nzsh.js";const k={components:{Navbar:w},setup(){return{authStore:y()}},data(){return{currentView:"start",cards:[],flippedCards:[],matchedPairs:[],number_all_answers:8,number_correct_answers:0,remainingTime:60,timeElapsed:0,time:"00:00:00",gameTimer:null,startTime:null}},computed:{formattedTime(){const e=Math.floor(this.remainingTime/60).toString().padStart(2,"0"),t=(this.remainingTime%60).toString().padStart(2,"0");return`00:${e}:${t}`},accuracy(){return this.number_all_answers>0?(this.number_correct_answers/this.number_all_answers*100).toFixed(2):0}},methods:{startGame(){this.currentView="test",this.cards=this.generateCards(),this.matchedPairs=[],this.number_correct_answers=0,this.remainingTime=60,this.timeElapsed=0,this.time="00:00:00",this.startTime=Date.now(),this.startTimer()},generateCards(){const e=["üòä","üòÇ","üòç","üòé","üòú","üò¢","üò±","üòà"],t=[...e,...e];return this.shuffle(t).map(r=>({value:r,flipped:!1,matched:!1}))},shuffle(e){return e.sort(()=>Math.random()-.5)},startTimer(){this.gameTimer=setInterval(()=>{this.remainingTime>0?(this.remainingTime--,this.timeElapsed++,this.time=this.formatTime(this.timeElapsed)):this.endGame()},1e3)},formatTime(e){const t=Math.floor(e/3600).toString().padStart(2,"0"),r=Math.floor(e%3600/60).toString().padStart(2,"0"),u=(e%60).toString().padStart(2,"0");return`${t}:${r}:${u}`},flipCard(e){e.flipped||e.matched||this.flippedCards.length===2||(e.flipped=!0,this.flippedCards.push(e),this.flippedCards.length===2&&this.checkForMatch())},checkForMatch(){const[e,t]=this.flippedCards;e.value===t.value?(e.matched=!0,t.matched=!0,this.matchedPairs.push(e),this.number_correct_answers++,this.number_correct_answers===this.number_all_answers&&this.endGame()):setTimeout(()=>{e.flipped=!1,t.flipped=!1},1e3),this.flippedCards=[]},endGame(){clearInterval(this.gameTimer),this.time=this.formatTime(this.timeElapsed),this.currentView="result",this.saveResults()},restartGame(){this.currentView="start",this.remainingTime=60,this.matchedPairs=[],this.flippedCards=[]},async saveResults(){if(!this.authStore.user){alert("–ü–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—å –Ω–µ –∞–≤—Ç–æ—Ä–∏–∑–æ–≤–∞–Ω. –ü–æ–∂–∞–ª—É–π—Å—Ç–∞, –≤–æ–π–¥–∏—Ç–µ –≤ —Å–∏—Å—Ç–µ–º—É.");return}const e=4,t=parseFloat(this.accuracy);try{const r=await fetch("http://127.0.0.1:8000/api/result/",{method:"POST",headers:{"Content-Type":"application/json",Authorization:`Bearer ${localStorage.getItem("token")}`},body:JSON.stringify({test:e,user:this.authStore.user.id,score_percentage:parseInt(t,10),time:this.time,number_all_answers:this.number_all_answers,number_correct_answers:this.number_correct_answers,accuracy:parseInt(t,10)})});if(r.ok)alert("–†–µ–∑—É–ª—å—Ç–∞—Ç—ã —É—Å–ø–µ—à–Ω–æ —Å–æ—Ö—Ä–∞–Ω–µ–Ω—ã!");else{const u=await r.json();alert(u.detail||u.error||"–û—à–∏–±–∫–∞ –ø—Ä–∏ —Å–æ—Ö—Ä–∞–Ω–µ–Ω–∏–∏ —Ä–µ–∑—É–ª—å—Ç–∞—Ç–æ–≤")}}catch(r){console.error("–û—à–∏–±–∫–∞ –ø—Ä–∏ –æ—Ç–ø—Ä–∞–≤–∫–µ —Ä–µ–∑—É–ª—å—Ç–∞—Ç–æ–≤:",r),alert("–ü—Ä–æ–∏–∑–æ—à–ª–∞ –æ—à–∏–±–∫–∞ —Å–æ–µ–¥–∏–Ω–µ–Ω–∏—è —Å —Å–µ—Ä–≤–µ—Ä–æ–º")}}}},V={class:"container mt-5 text-center"},G={id:"app"},x={key:0},N={key:1},I={class:"cards-container d-flex flex-wrap justify-content-center"},E=["onClick"],F={class:"card-inner"},M={class:"card-back"},P={key:2};function B(e,t,r,u,i,n){const f=d("Navbar"),_=d("router-link");return m(),o(p,null,[h(f),s("div",V,[s("h2",null,l(e.$route.params.name),1),s("div",G,[i.currentView==="start"?(m(),o("div",x,[t[2]||(t[2]=s("h1",null,'–ò–≥—Ä–∞ "–¢–µ—Å—Ç –Ω–∞ –ø–∞–º—è—Ç—å"',-1)),t[3]||(t[3]=s("p",null,[s("strong",null,'"–¢–µ—Å—Ç –Ω–∞ –ø–∞–º—è—Ç—å"'),c(" ‚Äî —ç—Ç–æ –∏–≥—Ä–∞ –Ω–∞ —Ä–∞–∑–≤–∏—Ç–∏–µ –≤–Ω–∏–º–∞–Ω–∏—è –∏ –∫–æ–Ω—Ü–µ–Ω—Ç—Ä–∞—Ü–∏–∏.")],-1)),t[4]||(t[4]=s("p",null,[s("strong",null,"–¶–µ–ª—å:"),c(" –ù–∞–π–¥–∏—Ç–µ –≤—Å–µ –ø–∞—Ä—ã –∑–∞ 60 —Å–µ–∫—É–Ω–¥.")],-1)),s("button",{class:"btn btn-primary",onClick:t[0]||(t[0]=(...a)=>n.startGame&&n.startGame(...a))},"–ù–∞—á–∞—Ç—å –∏–≥—Ä—É")])):i.currentView==="test"?(m(),o("div",N,[s("p",null,"–û—Å—Ç–∞–≤—à–µ–µ—Å—è –≤—Ä–µ–º—è: "+l(n.formattedTime),1),s("div",I,[(m(!0),o(p,null,T(i.cards,(a,b)=>(m(),o("div",{key:b,class:C(["card",{flipped:a.flipped||a.matched,matched:a.matched}]),onClick:j=>n.flipCard(a)},[s("div",F,[t[5]||(t[5]=s("div",{class:"card-front"},null,-1)),s("div",M,[s("span",null,l(a.value),1)])])],10,E))),128))])])):i.currentView==="result"?(m(),o("div",P,[t[6]||(t[6]=s("h3",null,"–†–µ–∑—É–ª—å—Ç–∞—Ç—ã",-1)),s("p",null,"–í—Ä–µ–º—è –≤—ã–ø–æ–ª–Ω–µ–Ω–∏—è: "+l(i.time),1),s("p",null,"–ü—Ä–∞–≤–∏–ª—å–Ω—ã–µ –æ—Ç–≤–µ—Ç—ã: "+l(i.number_correct_answers)+" / "+l(i.number_all_answers),1),s("p",null,"–¢–æ—á–Ω–æ—Å—Ç—å: "+l(n.accuracy)+"%",1),s("button",{class:"btn btn-success",onClick:t[1]||(t[1]=(...a)=>n.restartGame&&n.restartGame(...a))},"–ù–∞—á–∞—Ç—å –∑–∞–Ω–æ–≤–æ")])):v("",!0),h(_,{to:"/tests",class:"btn btn-secondary"},{default:S(()=>t[7]||(t[7]=[c("–ù–∞–∑–∞–¥ –∫ —Ç–µ—Å—Ç–∞–º")])),_:1})])])],64)}const z=g(k,[["render",B],["__scopeId","data-v-2d384e41"]]);export{z as default};
