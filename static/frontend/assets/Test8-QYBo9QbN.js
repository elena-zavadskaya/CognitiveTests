import{_ as g,a as y,r as h,c as o,o as i,b as _,d as e,e as m,t as r,g as d,F as w,f as S,w as k,u as q}from"./index-BFI9Nzsh.js";/* empty css                                                       */const v={components:{Navbar:y},setup(){return{authStore:q()}},data(){return{gameStarted:!1,gameEnded:!1,currentQuestion:0,answered:!1,feedback:"",number_all_answers:12,number_correct_answers:0,time:0,startTime:null,questions:[{sequence:"1, 2, ?, 4, 5",options:[2,3,1,4],answer:3},{sequence:"1, 3, ?, 7, 9",options:[5,3,1,13],answer:5},{sequence:"1, 10, 3, 8, ?, 6, 7, 4, 9, 2",options:[8,9,5,11],answer:5},{sequence:"1, 3, 9, 27, ?, 243",options:[36,48,81,54],answer:81},{sequence:"2, 3, 5, 7, 11, 13, 17, 19, ?, 29",options:[23,22,25,30],answer:23},{sequence:"916, 015, ?, 213, 312, 411",options:[123,332,113,114],answer:114},{sequence:"23, 57, 1113, 1719, 2329, ?, 4143, 4753",options:[3137,4122,51232,12523],answer:3137},{sequence:"1, 5, 16, 17, 18,<br>2, 6, 17, 18, ?",options:[31,22,19,5],answer:19},{sequence:"1 - 2 - 5 - 7 - 8,<br>8 - 7 - ? - 8 - 2",options:[1,2,5,8,7],answer:8},{sequence:"6 - 2 - 7 - 6 - 6 - 2,<br>2 - 0 - 7 - 0 - ? - 0",options:[2,0,6,7],answer:2},{sequence:"3.14, 4.28, 5.46, 6.82, 7.64, ?",options:[8.99,8.28,8.38,8],answer:8.28},{sequence:"8110423, 259974, 9814143, 5512166, 113322, ?",options:[334455,7911132,9841233,872236],answer:7911132}]}},computed:{accuracy(){if(this.number_all_answers===0)return 0;const n=this.number_correct_answers/this.number_all_answers*100;return Number(n.toFixed(2))},formattedTime(){const n=String(Math.floor(this.time/3600)).padStart(2,"0"),s=String(Math.floor(this.time%3600/60)).padStart(2,"0"),a=String(this.time%60).padStart(2,"0");return`${n}:${s}:${a}`},finalMessage(){const n=this.accuracy;return n>=80?"Вы настоящий мастер!":n>=50?"Хороший результат! Немного практики — и всё получится!":"Может быть, вам ближе искусство?"}},methods:{startGame(){this.gameStarted=!0,this.gameEnded=!1,this.currentQuestion=0,this.number_correct_answers=0,this.answered=!1,this.feedback="",this.time=0,this.startTime=Date.now()},handleAnswer(n){if(this.answered)return;this.answered=!0;const s=this.questions[this.currentQuestion];n===s.answer?(this.feedback="Правильно!",this.number_correct_answers++):this.feedback=`Неправильно! Правильный ответ: ${s.answer}`,setTimeout(()=>{this.moveToNextQuestion()},1500)},moveToNextQuestion(){this.answered=!1,this.currentQuestion+1<this.number_all_answers?this.currentQuestion++:this.endGame()},endGame(){this.gameStarted=!1,this.gameEnded=!0,this.time=Math.floor((Date.now()-this.startTime)/1e3),this.saveResults()},async saveResults(){if(!this.authStore.user){alert("Пользователь не авторизован.");return}const s={test:8,user:this.authStore.user.id,score_percentage:Math.round(this.accuracy),time:this.formattedTime,number_all_answers:this.number_all_answers,number_correct_answers:this.number_correct_answers,accuracy:Math.round(this.accuracy)};console.log("Отправляемые данные:",s);try{const a=await fetch("http://127.0.0.1:8000/api/result/",{method:"POST",headers:{"Content-Type":"application/json",Authorization:`Bearer ${localStorage.getItem("token")}`},body:JSON.stringify(s)}),c=await a.json();if(!a.ok)throw new Error(c.detail||c.error||JSON.stringify(c));alert("Результаты успешно сохранены!")}catch(a){console.error("Ошибка сохранения:",a),alert(`Ошибка: ${a.message}`)}}}},T={class:"container mt-5 text-center"},N={class:"game-container sequence-test-container"},Q={key:0},x={key:1},M={class:"info"},C={class:"sequence"},E=["innerHTML"],G={class:"answers"},A=["onClick","disabled"],B={key:0,class:"feedback message mt-3"},V={key:2,class:"results end-message"},D={class:"final-message"};function F(n,s,a,c,t,u){const p=h("Navbar"),b=h("router-link");return i(),o(w,null,[_(p),e("div",T,[e("div",N,[!t.gameStarted&&!t.gameEnded?(i(),o("div",Q,[e("h2",null,r(n.$route.params.name),1),s[1]||(s[1]=e("p",null,[e("strong",null,'"Тест Числовых Последовательностей"'),d(" — это тест для развития логического мышления и аналитических способностей.")],-1)),s[2]||(s[2]=e("p",null,[e("strong",null,"Цель игры:"),d(" разгадать закономерность числовой последовательности и выбрать правильное число.")],-1)),e("button",{class:"start-button btn btn-primary",onClick:s[0]||(s[0]=(...l)=>u.startGame&&u.startGame(...l))},"Начать тест")])):t.gameStarted?(i(),o("div",x,[e("div",M,[e("p",null,"Вопрос: "+r(t.currentQuestion+1)+" / "+r(t.number_all_answers),1),e("p",null,"Правильные ответы: "+r(t.number_correct_answers)+" / "+r(t.number_all_answers),1)]),e("div",C,[e("p",{innerHTML:t.questions[t.currentQuestion].sequence},null,8,E)]),e("div",G,[(i(!0),o(w,null,S(t.questions[t.currentQuestion].options,(l,f)=>(i(),o("button",{key:f,onClick:I=>u.handleAnswer(l),disabled:t.answered,class:"answer-button btn btn-outline-primary mx-1"},r(l),9,A))),128))]),t.answered?(i(),o("p",B,r(t.feedback),1)):m("",!0)])):m("",!0),t.gameEnded?(i(),o("div",V,[s[3]||(s[3]=e("h3",null,"Тест завершён!",-1)),e("p",null,"Вы ответили правильно на "+r(t.number_correct_answers)+" из "+r(t.number_all_answers)+" вопросов.",1),e("p",null,"Точность: "+r(u.accuracy)+"%",1),e("p",null,"Время выполнения: "+r(t.time),1),e("p",D,r(u.finalMessage),1)])):m("",!0),_(b,{to:"/tests",class:"btn btn-secondary"},{default:k(()=>s[4]||(s[4]=[d("Назад к тестам")])),_:1})])])],64)}const j=g(v,[["render",F]]);export{j as default};
