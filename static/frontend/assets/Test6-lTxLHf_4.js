import{_ as v,a as w,r as g,c as i,o,b,d as t,t as n,e as _,g as c,F as d,f,n as S,w as C,u as I}from"./index-BFI9Nzsh.js";/* empty css                                                       */const M={components:{Navbar:w},setup(){return{authStore:I()}},data(){return{gameStarted:!1,gameEnded:!1,timeRemaining:30,timer:null,lives:3,symbolsCount:2,maxSymbolsCount:6,leftImage:[],rightImage:[],imagesMatch:!1,message:"",isCorrect:null,number_all_answers:0,number_correct_answers:0,startTime:null,time:"00:00:00",symbols:["üî≤","‚ö´","‚¨õ","‚ñ∑","‚ñº","‚ñ≤","‚ñΩ","üîò"]}},computed:{formattedTime(){return this.formatTime(this.timeRemaining)},accuracy(){return this.number_all_answers>0?(this.number_correct_answers/this.number_all_answers*100).toFixed(2):"0.00"}},methods:{startGame(){this.gameStarted=!0,this.gameEnded=!1,this.lives=3,this.number_all_answers=0,this.number_correct_answers=0,this.timeRemaining=30,this.startTime=Date.now(),this.generateImages(),this.startTimer()},startTimer(){clearInterval(this.timer),this.timer=setInterval(()=>{this.timeRemaining>0?this.timeRemaining--:(clearInterval(this.timer),this.endGame(!0))},1e3)},generateImages(){const r=Array.from({length:this.symbolsCount},()=>this.symbols[Math.floor(Math.random()*this.symbols.length)]),e=[...r];if(this.imagesMatch=Math.random()<.7,!this.imagesMatch){const a=Math.floor(Math.random()*e.length);let m;do m=this.symbols[Math.floor(Math.random()*this.symbols.length)];while(m===e[a]);e[a]=m}this.leftImage=r,this.rightImage=e,this.number_all_answers++},handleAnswer(r){this.gameEnded||(r===this.imagesMatch?(this.message="–ü—Ä–∞–≤–∏–ª—å–Ω–æ!",this.isCorrect=!0,this.number_correct_answers++):(this.message="–ù–µ–ø—Ä–∞–≤–∏–ª—å–Ω–æ!",this.isCorrect=!1,this.lives--),this.lives===0?this.endGame():(this.number_all_answers%3===0&&this.symbolsCount<this.maxSymbolsCount&&this.symbolsCount++,setTimeout(()=>{this.message="",this.generateImages()},1e3)))},endGame(r=!1){if(this.gameEnded)return;this.gameEnded=!0,clearInterval(this.timer);const e=r?30:Math.min(30,Math.floor((Date.now()-this.startTime)/1e3));this.time=this.formatTime(e),this.saveResults()},formatTime(r){const e=String(Math.floor(r/3600)).padStart(2,"0"),a=String(Math.floor(r%3600/60)).padStart(2,"0"),m=String(r%60).padStart(2,"0");return`${e}:${a}:${m}`},async saveResults(){if(!this.authStore.user){alert("–ü–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—å –Ω–µ –∞–≤—Ç–æ—Ä–∏–∑–æ–≤–∞–Ω. –ü–æ–∂–∞–ª—É–π—Å—Ç–∞, –≤–æ–π–¥–∏—Ç–µ –≤ —Å–∏—Å—Ç–µ–º—É.");return}const r=6,e=this.accuracy;try{(await fetch("http://127.0.0.1:8000/api/result/",{method:"POST",headers:{"Content-Type":"application/json",Authorization:`Bearer ${localStorage.getItem("token")}`},body:JSON.stringify({test:r,user:this.authStore.user.id,score_percentage:Math.round(e),time:this.time,number_all_answers:this.number_all_answers,number_correct_answers:this.number_correct_answers})})).ok?alert("–†–µ–∑—É–ª—å—Ç–∞—Ç—ã —É—Å–ø–µ—à–Ω–æ —Å–æ—Ö—Ä–∞–Ω–µ–Ω—ã!"):alert("–û—à–∏–±–∫–∞ –ø—Ä–∏ —Å–æ—Ö—Ä–∞–Ω–µ–Ω–∏–∏ —Ä–µ–∑—É–ª—å—Ç–∞—Ç–æ–≤")}catch(a){console.error("–û—à–∏–±–∫–∞ –ø—Ä–∏ –æ—Ç–ø—Ä–∞–≤–∫–µ —Ä–µ–∑—É–ª—å—Ç–∞—Ç–æ–≤:",a)}}}},x={class:"container mt-5 text-center"},T={id:"app"},k={key:0},E={key:1},N={class:"game-area d-flex justify-content-center"},R={class:"image-container border p-3 mx-2"},A={class:"image-container border p-3 mx-2"},G={class:"choices d-flex justify-content-center"},B={key:2,class:"end-message"};function V(r,e,a,m,s,u){const p=g("Navbar"),y=g("router-link");return o(),i(d,null,[b(p),t("div",x,[t("h2",null,n(r.$route.params.name),1),t("div",T,[!s.gameStarted&&!s.gameEnded?(o(),i("div",k,[e[3]||(e[3]=t("h1",null,'–ò–≥—Ä–∞ "–°—Ä–∞–≤–Ω–µ–Ω–∏–µ –æ–±—ä–µ–∫—Ç–æ–≤"',-1)),e[4]||(e[4]=t("p",null,[t("strong",null,'"–°—Ä–∞–≤–Ω–µ–Ω–∏–µ –æ–±—ä–µ–∫—Ç–æ–≤"'),c(" ‚Äî —ç—Ç–æ –∏–≥—Ä–∞ –¥–ª—è —Ä–∞–∑–≤–∏—Ç–∏—è –ø—Ä–æ–∏–∑–≤–æ–ª—å–Ω–æ–≥–æ –≤–Ω–∏–º–∞–Ω–∏—è –∏ –∫–æ–Ω—Ü–µ–Ω—Ç—Ä–∞—Ü–∏–∏.")],-1)),e[5]||(e[5]=t("p",null,[t("strong",null,"–¶–µ–ª—å –∏–≥—Ä—ã:"),c(" —Å—Ä–∞–≤–Ω–∏—Ç—å –¥–≤–∞ –∏–∑–æ–±—Ä–∞–∂–µ–Ω–∏—è –∏ –æ–ø—Ä–µ–¥–µ–ª–∏—Ç—å, —Å–æ–≤–ø–∞–¥–∞—é—Ç –ª–∏ –æ–Ω–∏.")],-1)),e[6]||(e[6]=t("p",null,"–ò–≥—Ä–∞ –ø–æ–º–æ–≥–∞–µ—Ç —Ç—Ä–µ–Ω–∏—Ä–æ–≤–∞—Ç—å –≤–Ω–∏–º–∞–Ω–∏–µ, —É–≤–µ–ª–∏—á–∏–≤–∞—Ç—å –∫–æ–Ω—Ü–µ–Ω—Ç—Ä–∞—Ü–∏—é –∏ —É–ª—É—á—à–∞—Ç—å —Å–ø–æ—Å–æ–±–Ω–æ—Å—Ç—å –∫ –±—ã—Å—Ç—Ä–æ–º—É –∞–Ω–∞–ª–∏–∑—É.",-1)),t("button",{class:"start-button btn btn-primary",onClick:e[0]||(e[0]=(...l)=>u.startGame&&u.startGame(...l))},"–ù–∞—á–∞—Ç—å –∏–≥—Ä—É")])):s.gameStarted?(o(),i("div",E,[t("p",null,"–û—Å—Ç–∞–≤—à–µ–µ—Å—è –≤—Ä–µ–º—è: "+n(u.formattedTime),1),t("p",null,"–ñ–∏–∑–Ω–∏: "+n(s.lives),1),t("p",null,"–†–∞—É–Ω–¥: "+n(s.number_all_answers),1),t("p",null,"–ü—Ä–∞–≤–∏–ª—å–Ω—ã–µ –æ—Ç–≤–µ—Ç—ã: "+n(s.number_correct_answers)+" / "+n(s.number_all_answers),1),t("div",N,[t("div",R,[(o(!0),i(d,null,f(s.leftImage,(l,h)=>(o(),i("div",{key:"left-"+h,class:"symbol"},n(l),1))),128))]),t("div",A,[(o(!0),i(d,null,f(s.rightImage,(l,h)=>(o(),i("div",{key:"right-"+h,class:"symbol"},n(l),1))),128))])]),e[7]||(e[7]=t("p",{class:"instruction"},"–°–æ–≤–ø–∞–¥–∞—é—Ç –ª–∏ –∏–∑–æ–±—Ä–∞–∂–µ–Ω–∏—è?",-1)),t("div",G,[t("button",{class:"choice-button btn btn-danger mx-2",onClick:e[1]||(e[1]=l=>u.handleAnswer(!1))},"–ù–µ—Ç"),t("button",{class:"choice-button btn btn-success mx-2",onClick:e[2]||(e[2]=l=>u.handleAnswer(!0))},"–î–∞")]),t("p",{class:S(["message",{correct:s.isCorrect,incorrect:!s.isCorrect}])},n(s.message),3)])):_("",!0),s.gameEnded?(o(),i("div",B,[e[8]||(e[8]=t("h3",null,"–ò–≥—Ä–∞ –∑–∞–≤–µ—Ä—à–µ–Ω–∞!",-1)),t("p",null,"–ü—Ä–∞–≤–∏–ª—å–Ω—ã–µ –æ—Ç–≤–µ—Ç—ã: "+n(s.number_correct_answers)+" –∏–∑ "+n(s.number_all_answers),1),t("p",null,"–¢–æ—á–Ω–æ—Å—Ç—å: "+n(u.accuracy)+"%",1),t("p",null,"–í—Ä–µ–º—è –≤—ã–ø–æ–ª–Ω–µ–Ω–∏—è: "+n(s.time),1)])):_("",!0),b(y,{to:"/tests",class:"btn btn-secondary"},{default:C(()=>e[9]||(e[9]=[c("–ù–∞–∑–∞–¥ –∫ —Ç–µ—Å—Ç–∞–º")])),_:1})])])],64)}const F=v(M,[["render",V]]);export{F as default};
